import{T as u}from"./TemplateSetup-DmMsZDer.js";import{_ as g,c as f,w as m,r as w,o as b,b as o,d as n,e as l,v as i,h as v,t as c}from"./index-XFgfkqT_.js";import"./UtilityNavbar-CzfCgum_.js";import"./TemplateDefault-BCs3i3Pq.js";const h={inject:["io"],components:{TemplateSetup:u},data:()=>({config:{token:"",ip:"",port:"",role:"worker"},loading:!1}),async created(){await this.connect()},methods:{async connect(){this.loading=!0;const e=await this.io.service("setup").get("swarm");this.resolve(e)},async setup(e=!1){this.loading=!0;let t=await this.io.service("setup").update("swarm",{...this.config,create:e});this.resolve(t)},async resolve(e){e&&!e.ready?(this.config=e.config,this.config.role||(this.config.role="worker")):this.$router.push("/login"),this.loading=!1},getIp(){const e=location.hostname,t=/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,a=/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;(t.test(e)||a.test(e))&&(this.ip=e)}}},k=["disabled"],y=["disabled"],x={class:"mt-2"};function S(e,t,a,d,T,r){const p=w("TemplateSetup");return b(),f(p,null,{default:m(()=>[t[7]||(t[7]=o("h2",{class:"mb-2"}," Connect to swarm ",-1)),t[8]||(t[8]=n()),l(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.config.ip=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"IP:"},null,512),[[i,e.config.ip]]),t[9]||(t[9]=n()),l(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.config.port=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Port:"},null,512),[[i,e.config.port]]),l(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.config.token=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Token:"},null,512),[[i,e.config.token]]),t[10]||(t[10]=n()),l(o("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.config.role=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full"},t[6]||(t[6]=[o("option",{value:"worker"},"Worker",-1),o("option",{value:"manager"},"Manager",-1)]),512),[[v,e.config.role]]),t[11]||(t[11]=n()),o("button",{onClick:t[4]||(t[4]=s=>r.setup()),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-2 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Connect to existing swarm ",8,k),t[12]||(t[12]=n()),o("button",{onClick:t[5]||(t[5]=s=>r.setup(!0)),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Create a new swarm ",8,y),o("h2",x," Loading: "+c(e.loading),1)]),_:1,__:[7,8,9,10,11,12]})}const U=g(h,[["render",S]]);export{U as default};
