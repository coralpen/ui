import{T as p}from"./TemplateSetup-Co6CAMFK.js";import{_ as u,c as m,w as g,r as f,o as b,b as l,d as o,e as n,v as i,i as a,t as y}from"./index-COJNagva.js";import"./UtilityNavbar-BstfAzFS.js";import"./TemplateDefault-DFeK-qxG.js";const v={inject:["io"],components:{TemplateSetup:p},data:()=>({config:{user:"",pass:"",host:"smtp.gmail.com",port:465,secure:!0,pool:!1,rejectUnauthorized:!0},receiver:"",loading:!1}),async created(){await this.connect()},methods:{async connect(){this.loading=!0;const t=await this.io.service("setup").get("mail");this.resolve(t)},async setup(t=!1){this.loading=!0;let e=await this.io.service("setup").update("mail",{test:t,receiver:this.receiver,...this.config});t?(alert("Test email sent"),this.loading=!1):this.resolve(e)},async resolve(t){t&&!t.ready||this.$router.push("/login"),this.loading=!1}}},x=["disabled"],w=["disabled"],h={class:"mt-2"};function k(t,e,S,U,V,r){const d=f("TemplateSetup");return b(),m(d,null,{default:g(()=>[e[10]||(e[10]=l("h2",{class:"mb-2"}," Setup sender email ",-1)),e[11]||(e[11]=o()),n(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.config.user=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Email:",name:"email"},null,512),[[i,t.config.user]]),e[12]||(e[12]=l("a",{class:"hover:no-underline hover:text-sky-100 underline inline-block mb-2",style:{height:"24px"},target:"_blank",href:"https://security.google.com/settings/security/apppasswords"}," Get gmail app password (optional) ",-1)),n(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.config.pass=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Password:",type:"password",name:"password"},null,512),[[i,t.config.pass]]),n(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.config.host=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Host: smtp.gmail.com",name:"host"},null,512),[[i,t.config.host]]),e[13]||(e[13]=o()),n(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.config.port=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Port: 465",type:"number",name:"port"},null,512),[[i,t.config.port]]),e[14]||(e[14]=o()),e[15]||(e[15]=l("label",{class:"block"},"Secure",-1)),e[16]||(e[16]=o()),n(l("input",{name:"secure",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>t.config.secure=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[a,t.config.secure]]),e[17]||(e[17]=o()),e[18]||(e[18]=l("label",{class:"block"},"Pool",-1)),e[19]||(e[19]=o()),n(l("input",{name:"pool",type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>t.config.pool=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[a,t.config.pool]]),e[20]||(e[20]=o()),e[21]||(e[21]=l("label",{class:"block"},"Reject unauthorized",-1)),e[22]||(e[22]=o()),n(l("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>t.config.rejectUnauthorized=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[a,t.config.rejectUnauthorized]]),e[23]||(e[23]=l("h2",{class:"mt-10 mb-2",style:{height:"24px"}}," Send a test email ",-1)),n(l("input",{name:"receiver-email","onUpdate:modelValue":e[7]||(e[7]=s=>t.receiver=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Receiver: example@gmail.com"},null,512),[[i,t.receiver]]),l("button",{onClick:e[8]||(e[8]=s=>r.setup(!0)),disabled:t.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Send test email ",8,x),e[24]||(e[24]=l("h2",{class:"mt-10",style:{height:"24px"}}," Store sender ",-1)),l("button",{onClick:e[9]||(e[9]=s=>r.setup()),disabled:t.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Submit ",8,w),l("h2",h," Loading: "+y(t.loading),1)]),_:1,__:[10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]})}const z=u(v,[["render",k]]);export{z as default};
